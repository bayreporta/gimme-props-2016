/*
 slide-template 2016-12-02 
*/
function toggleAnimation(a){"#cookie"==a?setTimeout(noshCookie,1300):"#yescookie"==a?dropCookie():"#prop51"==a?animationControl(!0,".hammer"):"#prop52"==a?animationControl(!0,'#prop52 div[data="coin"]'):"#prop53"==a?(animationControl(!0,".approved"),animationControl(!0,".denied")):"#prop54"==a?animationControl(!0,'#prop54 div[data="eye"]'):"#prop55"==a?rainingCoins("#prop55"):"#prop56"==a?animationControl(!0,".smoke"):"#prop59"==a?rainingCoins("#prop59"):"#prop60"==a?animationControl(!0,'#prop60 div[data="condom"]'):"#prop64"==a?animationControl(!0,'#prop64 div[data="pot"] svg'):"#prop66"==a?animationControl(!0,".drip"):"#prop67"==a&&animationControl(!0,'#prop67 div[data="bag"]')}function clearAnimations(){animationControl(!1,'#prop54 div[data="eye"]'),animationControl(!1,".hammer"),animationControl(!1,'#prop52 div[data="coin"]'),animationControl(!1,".approved"),animationControl(!1,".denied"),animationControl(!1,".smoke"),animationControl(!1,'#prop60 div[data="condom"]'),animationControl(!1,'#prop64 div[data="pot"] svg'),animationControl(!1,'#prop66 div[data="syringe"] svg>path:eq(0)'),animationControl(!1,'#prop67 div[data="bag"]'),destroyCoins()}function animationControl(a,b){a===!0?$(b).css({"-webkit-animation-play-state":"running","-ms-animation-play-state":"running","-moz-animation-play-state":"running","animation-play-state":"running"}):$(b).css({"-webkit-animation-play-state":"paused","-ms-animation-play-state":"paused","-moz-animation-play-state":"paused","animation-play-state":"paused"})}function noshCookie(){$("#cookie>div:eq(0)").hide(),$("#cookie>div:eq(1)").show(),setTimeout(function(){$("#cookie>div:eq(1)").animate({top:2e3},200,function(){$("#cookie>div:eq(2)").fadeIn(1),gimmeProps.slides.lockSlide=!1;var a=getCookie();a===!0&&returnCustomer(),$(this).remove()})},500)}function dropCookie(){$("#yescookie .cookie").animate({top:2e3},2e3)}function rainingCoins(a){var b='<svg class="coins" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="5" y="5" width="90" height="90" fill="none"/><path d="M89.6 33.3c-2.2-5.1-5.3-9.7-9.2-13.7 -3.9-3.9-8.5-7-13.7-9.2C61.4 8.2 55.8 7.1 50 7.1s-11.4 1.1-16.7 3.4c-5.1 2.2-9.7 5.3-13.7 9.2 -3.9 3.9-7 8.5-9.2 13.7 -2.2 5.3-3.4 10.9-3.4 16.7 0 5.8 1.1 11.4 3.4 16.7 2.2 5.1 5.3 9.7 9.2 13.7 3.9 3.9 8.5 7 13.7 9.2 5.3 2.2 10.9 3.4 16.7 3.4s11.4-1.1 16.7-3.4c5.1-2.2 9.7-5.3 13.7-9.2s7-8.5 9.2-13.7c2.2-5.3 3.4-10.9 3.4-16.7C93 44.2 91.8 38.6 89.6 33.3zM87.5 65.9c-2 4.8-5 9.2-8.7 12.9 -3.7 3.7-8.1 6.7-12.9 8.7 -5 2.1-10.3 3.2-15.8 3.2 -5.5 0-10.8-1.1-15.8-3.2 -4.8-2-9.2-5-12.9-8.7 -3.7-3.7-6.7-8.1-8.7-12.9 -2.1-5-3.2-10.3-3.2-15.8s1.1-10.8 3.2-15.8c2-4.8 5-9.2 8.7-12.9 3.7-3.7 8.1-6.7 12.9-8.7C39.2 10.5 44.5 9.4 50 9.4s10.8 1.1 15.8 3.2c4.8 2 9.2 5 12.9 8.7 3.7 3.7 6.7 8.1 8.7 12.9 2.1 5 3.2 10.3 3.2 15.8S89.6 60.8 87.5 65.9z"/><path d="M40.6 37.8c0 4.2 2.7 7.8 6.7 9l0-5.7 -0.1-12.3C43.3 30.1 40.6 33.7 40.6 37.8z"/><path d="M52.7 71.2c4-1.2 6.7-4.8 6.7-9 0-4.2-2.7-7.8-6.6-9L52.7 70.4V71.2z"/><path d="M76.1 23.9c-3.4-3.4-7.3-6.1-11.7-7.9 -4.6-1.9-9.4-2.9-14.4-2.9s-9.8 1-14.4 2.9c-4.4 1.9-8.3 4.5-11.7 7.9 -3.4 3.4-6.1 7.3-7.9 11.7 -1.9 4.6-2.9 9.4-2.9 14.4 0 5 1 9.8 2.9 14.4 1.9 4.4 4.5 8.4 7.9 11.7 3.4 3.4 7.3 6.1 11.7 7.9 4.6 1.9 9.4 2.9 14.4 2.9s9.8-1 14.4-2.9c4.4-1.9 8.4-4.5 11.7-7.9 3.4-3.4 6.1-7.3 7.9-11.7 1.9-4.6 2.9-9.4 2.9-14.4 0-5-1-9.8-2.9-14.4C82.2 31.3 79.5 27.3 76.1 23.9zM52.8 41.2l0 6.4c3.3 0.6 6.3 2.4 8.5 5 2.3 2.7 3.6 6.2 3.6 9.7 0 3.6-1.3 7.1-3.6 9.8 -2.2 2.6-5.3 4.3-8.6 4.9v2.6c0 1.5-1.2 2.8-2.8 2.8s-2.8-1.2-2.8-2.8v-2.6c-3.3-0.6-6.3-2.4-8.5-5 -2.3-2.7-3.6-6.2-3.6-9.7 0-1.5 1.2-2.8 2.8-2.8s2.8 1.2 2.8 2.8c0 4.1 2.7 7.7 6.6 9V70.4l0.1-17.9c-3.3-0.6-6.3-2.4-8.6-5 -2.3-2.7-3.6-6.2-3.6-9.7 0-3.6 1.3-7 3.6-9.7 2.2-2.6 5.2-4.3 8.5-5l0-2.6c0-1.5 1.2-2.8 2.8-2.8h0c1.5 0 2.8 1.2 2.8 2.8l0 2.6c3.3 0.6 6.4 2.4 8.6 5 2.3 2.7 3.6 6.2 3.6 9.8 0 1.5-1.2 2.8-2.8 2.8s-2.8-1.2-2.8-2.8c0-4.2-2.7-7.8-6.6-9L52.8 41.2z"/></svg>';$(a).append(b).append(b).append(b).append(b).append(b),$(a+" svg:eq(1)").css({top:-200,left:"80%"}).animate({top:3e3},5500),$(a+" svg:eq(2)").css({top:-200,left:"40%"}).animate({top:3e3},6e3),$(a+" svg:eq(3)").css({top:-200,left:"50%"}).animate({top:3e3},5e3),$(a+" svg:eq(4)").css({top:-200,left:"70%"}).animate({top:3e3},6500,function(){$(".coins").remove()}),$(a+" svg:last-of-type").css({top:-200,left:"20%"}).animate({top:3e3},5e3)}function destroyCoins(){$("#prop59 svg:last-of-type").dequeue(),$("#prop59 svg:eq(1)").dequeue(),$("#prop59 svg:eq(2)").dequeue(),$("#prop59 svg:eq(3)").dequeue(),$("#prop59 svg:eq(4)").dequeue(),$(".coins").remove()}function setCookie(){Cookies.set("gimme props",gimmeProps.score,{expires:30}),gimmeProps.data.cookie=!0}function getCookie(){var a=Cookies.getJSON("gimme props");if(void 0!==a)return gimmeProps.data.cookie=!0,gimmeProps.score=a,!0}function returnCustomer(){$("#cookie h1").text("You haz cookie!"),$("#cookie p").text(""),$("#cookie h2").text("Looks like this isn't your first prop rodeo. We've loaded your previous progress. Have a ball."),gimmeProps.slides.curSlide="#cookie",gimmeProps.slides.leftSlide="#proplist",gimmeProps.slides.rightSlide="#proplist";for(var a=0;a<gimmeProps.data.resources.length;a++)null!==gimmeProps.score[gimmeProps.data.resources[a].propselect]&&(gimmeProps.score[gimmeProps.data.resources[a].propselect]==-1?$("#prop"+gimmeProps.data.resources[a].propid+" .circle i").css("color","#7b272c").removeClass("fa-question").removeClass("fa-check").addClass("fa-times"):0===gimmeProps.score[gimmeProps.data.resources[a].propselect]?$("#prop"+gimmeProps.data.resources[a].propid+" .circle i").css("color","#666").removeClass("fa-times").removeClass("fa-check").addClass("fa-question"):1==gimmeProps.score[gimmeProps.data.resources[a].propselect]&&$("#prop"+gimmeProps.data.resources[a].propid+" .circle i").css("color","#2c7b27").removeClass("fa-question").removeClass("fa-times").addClass("fa-check"))}function initializeJQuery(){initTransitions(),initJSON(),initMenu()}function initTransitions(){$(document).on("keydown",function(a){null!==gimmeProps.slides.rightSlide&&gimmeProps.slides.lockSlide===!1&&39==a.which&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({left:-1e4},300),$(gimmeProps.slides.rightSlide).animate({left:0},300),a.preventDefault(),slideControl("right"))}),$(document).on("keydown",function(a){null!==gimmeProps.slides.leftSlide&&gimmeProps.slides.lockSlide===!1&&37==a.which&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({left:1e4},300),$(gimmeProps.slides.leftSlide).animate({left:0},300),a.preventDefault(),slideControl("left"))}),$(document).on("keydown",function(a){null!==gimmeProps.slides.upSlide&&gimmeProps.slides.lockSlide===!1&&38==a.which&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({top:1e4},300),$(gimmeProps.slides.upSlide).animate({top:0},300),a.preventDefault(),slideControl("up"))}),$(document).on("keydown",function(a){null!==gimmeProps.slides.downSlide&&gimmeProps.slides.lockSlide===!1&&40==a.which&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({top:-1e4},300),$(gimmeProps.slides.downSlide).animate({top:0},300),a.preventDefault(),slideControl("down"))}),$(window).on("swipeleft",function(a){null!==gimmeProps.slides.rightSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({left:-1e4},300),$(gimmeProps.slides.rightSlide).animate({left:0},300),a.preventDefault(),slideControl("right"))}),$(window).on("swiperight",function(a){null!==gimmeProps.slides.leftSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({left:1e4},300),$(gimmeProps.slides.leftSlide).animate({left:0},300),a.preventDefault(),slideControl("left"))}),$(window).on("swipeup",function(a){null!==gimmeProps.slides.downSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({top:-1e4},300),$(gimmeProps.slides.downSlide).animate({top:0},300),slideControl("down"))}),$(window).on("swipedown",function(a){null!==gimmeProps.slides.upSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({top:1e4},300),$(gimmeProps.slides.upSlide).animate({top:0},300),slideControl("up"))}),$(".rightcaret").add(".propcaretright").on("click",function(a){null!==gimmeProps.slides.rightSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({left:-1e4},300),$(gimmeProps.slides.rightSlide).animate({left:0},300),a.preventDefault(),slideControl("right"))}),$(".leftcaret").add(".propcaretleft").on("click",function(a){null!==gimmeProps.slides.leftSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({left:1e4},300),$(gimmeProps.slides.leftSlide).animate({left:0},300),a.preventDefault(),slideControl("left"))}),$(".downcaret").on("click",function(a){null!==gimmeProps.slides.downSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({top:-1e4},300),$(gimmeProps.slides.downSlide).animate({top:0},300),slideControl("down"))}),$(".upcaret").on("click",function(a){null!==gimmeProps.slides.upSlide&&gimmeProps.slides.lockSlide===!1&&(changeBackground(),$(gimmeProps.slides.curSlide).animate({top:1e4},300),$(gimmeProps.slides.upSlide).animate({top:0},300),slideControl("up"))})}function initMenu(){$("#deets").on("click",function(){$(gimmeProps.slides.curSlide).animate({top:-1e4},300),$("#proplist").css({top:-1e4,left:0}).animate({top:0},300),"on"==$("#results").attr("state")&&$("#deets").click(),gimmeProps.slides.curSlide="#proplist",gimmeProps.slides.downSlide="#prop51",$(".downcaret").animate({opacity:.3},300),$(".rightcaret").add(".leftcaret").add(".upcaret").css("opacity",0),$(".propcaretleft").add(".propcaretright").animate({opacity:0},300),gimmeProps.propstate.propMode=!1,$("."+gimmeProps.propstate.propSelected).remove(),setTimeout(function(){$("."+gimmeProps.propstate.propSelected).add(".propheader").remove()},300)})}function initData(a){$.getJSON("dist/js/json/"+a+".json",function(b){gimmeProps.data.props[a]=b[a],gimmeProps.score[a]=null})}function initJSON(){$.getJSON("dist/js/json/master.json",function(a){gimmeProps.data.master=a;for(var b=0;b<gimmeProps.data.master.length;b++)initData(a[b].slideid)}),$.getJSON("dist/js/json/slidecontrol.json",function(a){populateSlides(a)}),$.getJSON("dist/js/json/resources.json",function(a){gimmeProps.data.resources=a}),$.getJSON("dist/js/json/header.json",function(a){gimmeProps.data.header=a})}function parseResources(a){for(var b=0;b<gimmeProps.data.resources.length;b++)if(gimmeProps.data.resources[b].propid==a){$("#resources a:eq(0)").attr("href",gimmeProps.data.resources[b].kqed),$("#resources a:eq(1)").attr("href",gimmeProps.data.resources[b].ballotfyi),$("#resources a:eq(2)").attr("href",gimmeProps.data.resources[b].ballotpedia);break}}function retreiveHeader(a){for(var b=0;b<gimmeProps.data.header.length;b++)if(gimmeProps.data.header[b].propid==a)return gimmeProps.data.header[b].hasOwnProperty("icon")||(gimmeProps.data.header[b].icon=""),gimmeProps.data.header[b].hasOwnProperty("color")||(gimmeProps.data.header[b].color=""),gimmeProps.data.header[b];return null}function changeBackground(){var a=$(gimmeProps.slides.curSlide).css("background-color");$("html").css("background-color",a)}function calcPoints(a,b){"left"==b?gimmeProps.propstate.points+=parseInt(a.leftpoints):"right"==b&&(gimmeProps.propstate.points+=parseInt(a.rightpoints))}function slideControl(a){var b=gimmeProps.slides,c=gimmeProps.propstate;b.leftSlide=null,b.rightSlide=null,b.upSlide=null,b.downSlide=null,"#resources"==b.curSlide&&setTimeout(function(){$("."+c.propSelected).add(".propheader").remove()},300),c.returning===!0?(b.curSlide="#resources",b.leftSlide="#"+c.propSelected,b.rightSlide="#"+c.propSelected,$("."+c.propSelected).remove(),$("#resources").attr({leftslide:"#"+c.propSelected,rightslide:"#"+c.propSelected}),$(".rightcaret").add(".leftcaret").animate({opacity:.3},300),$(".propcaretleft").add(".propcaretright").animate({opacity:0},300),c.returning=!1):c.propMode===!0?configurePropSlides(b,c,a):configureSlides(b,c,a),"#proplist"==b.curSlide&&$("#menu").fadeIn(300),resetSlidePosition(b)}function configurePropSlides(a,b,c){var d=gimmeProps.data.props[b.propSelected];if("#tutorial"==a.curSlide)$(".rightcaret").animate({opacity:0},300),$(".propcaretright").add(".propcaretleft").animate({opacity:.3},300);else{if(calcPoints(d[b.propID],c),"victory"==$("#"+b.propSelected+d[b.propID].rightid).attr("special")){var e;b.points<0?e="oppose":b.points>0?e="support":0===b.points&&(e="default");for(var f=0;f<d.length;f++)d[f].id==d[b.propID].rightid&&d[f].victorycond==e&&($("#"+b.propSelected+d[b.propID].rightid+" h2").text(d[f].maintext),$("#"+b.propSelected+d[b.propID].rightid+" h3:eq(1)").text(d[f].subtext))}"left"==c?b.propID=parseInt(d[b.propID].leftid):"right"==c&&(b.propID=parseInt(d[b.propID].rightid))}if(a.curSlide="#"+d[b.propID].slideid,a.leftSlide="#"+d[b.propID].leftslide,a.rightSlide="#"+d[b.propID].rightslide,d[b.propID].victoryslide===!0){var g;b.points<0?(g="OPPOSE",$(a.curSlide).addClass("darkred"),$("#"+b.propSelected+" .circle i").css("color","#7b272c").removeClass("fa-question").removeClass("fa-check").addClass("fa-times"),gimmeProps.score[b.propSelected]=-1):b.points>0?(g="SUPPORT",$(a.curSlide).addClass("darkgreen"),$("#"+b.propSelected+" .circle i").css("color","#2c7b27").removeClass("fa-question").removeClass("fa-times").addClass("fa-check"),gimmeProps.score[b.propSelected]=1):0===b.points&&(g="GO EITHER WAY",$(a.curSlide).addClass("darkgray"),$('.prop-result[data="'+b.propSelected+'"] .circle').css("background-color","#666666"),$('.prop-result[data="'+b.propSelected+'"] .circle i').removeClass("fa-times").removeClass("fa-check").addClass("fa-question"),gimmeProps.score[b.propSelected]=0),gimmeProps.data.cookie===!0&&setCookie(),$("<h1/>",{text:g,style:"font-size:8rem;line-height: 9rem;"}).prependTo(a.curSlide+" .propquestion"),b.propMode=!1,b.returning=!0}}function configureSlides(a,b,c){var d;d="#cookie"===a.curSlide&&gimmeProps.data.cookie===!0?$("#yescookie"):$(a.curSlide),"up"==c?a.curSlide=d.attr("upslide"):"down"==c?a.curSlide=d.attr("downslide"):"left"==c?a.curSlide=d.attr("leftslide"):"right"==c&&(a.curSlide=d.attr("rightslide"));var e=$(a.curSlide);void 0!==e.attr("upslide")?(a.upSlide=$(e).attr("upslide"),$(".upcaret").animate({opacity:.3},300)):$(".upcaret").animate({opacity:0},300),void 0!==e.attr("downslide")?(a.downSlide=$(e).attr("downslide"),$(".downcaret").animate({opacity:.3},300)):$(".downcaret").animate({opacity:0},300),void 0!==e.attr("leftslide")?(a.leftSlide=$(e).attr("leftslide"),$(".leftcaret").animate({opacity:.3},300)):$(".leftcaret").animate({opacity:0},300),void 0!==e.attr("rightslide")?(a.rightSlide=$(e).attr("rightslide"),$(".rightcaret").animate({opacity:.3},300)):$(".rightcaret").animate({opacity:0},300),"true"===$(e).attr("lockslide")&&(a.lockSlide=!0),"true"===$(e).attr("clearanimation")&&clearAnimations(),"true"===$(e).attr("tutorial")?$("#directions").fadeIn(300):$("#directions").fadeOut(300),"true"===$(e).attr("animation")&&toggleAnimation(a.curSlide),"#tutorial"==a.curSlide&&initProp(d.attr("id"),a,b),"yescookie"==$(e).attr("id")&&setCookie()}function populateSlides(a){for(var b=0;b<a.length;b++)void 0!==a[b].leftid&&$(a[b].targetid).attr("leftslide",a[b].leftid),void 0!==a[b].rightid&&$(a[b].targetid).attr("rightslide",a[b].rightid),void 0!==a[b].upid&&$(a[b].targetid).attr("upslide",a[b].upid),void 0!==a[b].downid&&$(a[b].targetid).attr("downslide",a[b].downid),a[b].lockslide!==!1&&$(a[b].targetid).attr("lockslide","true"),a[b].animation!==!1&&$(a[b].targetid).attr("animation","true"),a[b].clearanimation!==!1&&$(a[b].targetid).attr("clearanimation","true"),a[b].tutorial!==!1&&$(a[b].targetid).attr("tutorial","true")}function resetSlidePosition(a){$(a.upSlide).css({left:0,top:-1e4,"z-index":0}),$(a.downSlide).css({left:0,top:1e4,"z-index":0}),$(a.leftSlide).css({left:-1e4,top:0,"z-index":0}),$(a.rightSlide).css({left:1e4,top:0,"z-index":0})}function initProp(a,b,c){c.propSelected=a;var d=gimmeProps.data.props[c.propSelected];c.points=0,c.propID=0,c.propMode=!0,b.rightSlide="#"+c.propSelected+"0",parseResources(d[0].propid);var e=retreiveHeader(d[0].propid);loadPropSlides(d,c.propSelected,e)}function loadPropSlides(a,b,c){$("<div/>",{class:"propheader"}).appendTo("#container"),$(".propheader").append(c.icon),$(".propheader svg").css("fill",c.color),$("<h2/>",{text:c.name}).appendTo(".propheader");for(var d=0;d<a.length;d++)a[d].hasOwnProperty("lefttext")||(a[d].lefttext=""),a[d].hasOwnProperty("subtext")||(a[d].subtext=""),a[d].hasOwnProperty("righttext")||(a[d].righttext=""),a[d].hasOwnProperty("victoryslide")||(a[d].victoryslide=!1),a[d].hasOwnProperty("special")||(a[d].special=!1),$("<section/>",{id:a[d].slideid,class:"relative startpos "+b,special:a[d].special}).appendTo("#container"),$("<div/>",{class:"propquestion"}).appendTo("#"+a[d].slideid),a[d].victoryslide===!0?$("<h2/>",{text:a[d].maintext,class:"txtcenter"}).appendTo("#"+a[d].slideid+" .propquestion"):a[d].victoryslide===!1&&$("<h1/>",{text:a[d].maintext}).appendTo("#"+a[d].slideid+" .propquestion"),$("<div/>",{class:"propchoice"}).appendTo("#"+a[d].slideid),$("<h3/>",{text:a[d].lefttext}).appendTo("#"+a[d].slideid+" .propchoice"),$("<h3/>",{text:a[d].subtext}).appendTo("#"+a[d].slideid+" .propchoice"),$("<h3/>",{text:a[d].righttext}).appendTo("#"+a[d].slideid+" .propchoice")}var gimmeProps={propstate:{points:0,propID:0,propSelected:null,propMode:!1,returning:!1},slides:{curSlide:"#intro",upSlide:null,downSlide:null,leftSlide:null,rightSlide:"#about",lockSlide:!1},data:{master:[],cookie:!1,props:{},resources:[],header:[]},score:{}};window.onload=function(){initializeJQuery()};